FROM node:16 AS build

ENV PUBLIC_API_ADDRESS=$PUBLIC_API_ADDRESS
ENV PRIVATE_API_ADDRESS=$PRIVATE_API_ADDRESS

ARG PUBLIC_API_ADDRESS
ARG PRIVATE_API_ADDRESS
WORKDIR /app
COPY frontend/ .

RUN npm i
RUN npx vite build

ENTRYPOINT ["node", "build/index.js"]
